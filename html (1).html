<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互联网产品消消乐</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #2196f3;
            --secondary: #ff4081;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --company-color: #3498db;
            --app-color: #9b59b6;
            --game-color: #e74c3c;
            --founder-color: #f39c12;
            --investor-color: #27ae60;
            --text-primary: #333;
            --text-secondary: #666;
            --bg-light: #f5f5f5;
            --bg-dark: #1e1e1e;
            --card-bg: white;
            --border-color: #ddd;
            --grid-size: 5;
        }

        .dark-mode {
            --text-primary: #f0f0f0;
            --text-secondary: #ccc;
            --bg-light: #121212;
            --bg-dark: #0a0a0a;
            --card-bg: #252525;
            --border-color: #444;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            color: var(--text-primary);
            line-height: 1.6;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 20px auto;
            padding: 20px;
        }

        .title-area {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 10;
        }

        .title {
            color: var(--dark);
            font-size: 2.8rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }

        .title span {
            color: var(--primary);
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 15px;
        }

        .game-container {
            position: relative;
            z-index: 5;
        }

        .game-ui {
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
            backdrop-filter: blur(5px);
        }

        .start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }



        .start-content {
            text-align: center;
            color: white;
            padding: 40px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .start-content h2 {
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .start-description {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .start-game-btn {
            font-size: 1.3rem;
            padding: 15px 40px;
            border-radius: 50px;
            border: none;
            background: var(--success);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .start-game-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
            background: #45a049;
        }

        .game-header {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
            gap: 10px;
        }

        .status-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 15px;
            border-radius: 30px;
            min-width: 110px;
            background: rgba(0,0,0,0.05);
        }

        .status-label {
            font-weight: bold;
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        .status-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .score .status-value { color: var(--dark); }
        .level .status-value { color: var(--success); }
        .timer .status-value { color: var(--warning); }
        .hints .status-value { color: var(--primary); }
        .combo .status-value { color: var(--danger); }

        .game-area {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            justify-items: center;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(var(--grid-size), 1fr);
            gap: 8px;
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
            padding: 0 10px;
        }
        
        @media (max-width: 768px) {
            :root {
                --grid-size: 4;
            }
            
            .container {
                padding: 10px;
            }
            
            .game-ui {
                padding: 15px;
            }
            
            .game-header {
                flex-direction: column;
                align-items: center;
                gap: 5px;
            }
            
            .status-item {
                min-width: 90px;
                padding: 5px 10px;
            }
            
            .status-value {
                font-size: 1.4rem;
            }
            
            .grid-item {
                font-size: 0.7rem;
                padding: 5px;
            }
            
            .start-content h2 {
                font-size: 2rem;
            }
            
            .start-description {
                font-size: 1rem;
            }
            
            .start-game-btn {
                font-size: 1.1rem;
                padding: 12px 30px;
            }
        }
        
        @media (max-width: 480px) {
            :root {
                --grid-size: 3;
            }
            
            .status-item {
                min-width: 80px;
            }
            
            .grid-item {
                font-size: 0.6rem;
            }
        }

        .grid-item {
            aspect-ratio: 1/1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            padding: 10px;
            overflow: hidden;
            font-size: 0.9rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            user-select: none;
            transform-style: preserve-3d;
        }

        .company-item { background: var(--company-color); color: white; }
        .app-item { background: var(--app-color); color: white; }
        .game-item { background: var(--game-color); color: white; }
        .founder-item { background: var(--founder-color); color: white; }
        .investor-item { background: var(--investor-color); color: white; }

        .grid-item:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            z-index: 10;
        }

        .grid-item.selected {
            transform: scale(0.95);
            box-shadow: 0 0 0 3px white, 0 0 0 6px var(--primary);
            z-index: 20;
        }

        .grid-item.correct {
            animation: correctAnimation 0.6s ease-out;
        }
        
        .type-badge {
            position: absolute;
            bottom: 5px;
            right: 5px;
            font-size: 0.7rem;
            background: rgba(0,0,0,0.3);
            color: white;
            padding: 2px 5px;
            border-radius: 10px;
            text-transform: uppercase;
        }

        .grid-item.matched {
            visibility: hidden;
            pointer-events: none;
        }

        .item-type {
            position: absolute;
            bottom: 5px;
            right: 5px;
            font-size: 0.7rem;
            color: rgba(255,255,255,0.9);
            padding: 1px 5px;
            background-color: rgba(0,0,0,0.2);
            border-radius: 4px;
            text-transform: uppercase;
        }

        .legend {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 15px;
            background: rgba(255,255,255,0.8);
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            align-self: start;
            max-width: 200px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        .btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.15);
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-warning {
            background-color: var(--warning);
            color: white;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.9);
            border: 2px solid var(--primary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            z-index: 100;
        }

        @keyframes correctAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.1) rotate(2deg); background-color: #ffeb3b; }
            75% { background-color: #81c784; }
            100% { transform: scale(0); opacity: 0; }
        }

        .combo-animation {
            position: absolute;
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--danger);
            animation: comboAnimation 1s ease-out forwards;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes comboAnimation {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-50px) scale(1.5); opacity: 0; }
        }

        .result-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .result-modal.show {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 15px 30px rgba(0,0,0,0.3);
        }

        .modal-title {
            font-size: 2.2rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .final-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .stat-item {
            padding: 15px;
            border-radius: 10px;
            background: rgba(0,0,0,0.05);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--dark);
        }

        .actions {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .instructions {
            margin-top: 20px;
            padding: 15px 0;
            background: transparent;
            border-radius: 0;
            box-shadow: none;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        .instructions h3 {
            margin-bottom: 10px;
            color: var(--text-secondary);
            text-align: center;
            font-size: 1.1rem;
        }

        .rules-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            justify-items: center;
        }

        .rule {
            background: rgba(33, 150, 243, 0.05);
            padding: 10px;
            border-radius: 6px;
            border-left: 2px solid rgba(33, 150, 243, 0.3);
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2.2rem;
            }
            
            .game-area {
                grid-template-columns: 1fr;
            }
            
            .legend {
                max-width: 100%;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .rules-list {
                grid-template-columns: 1fr 1fr;
            }
            
            .game-header {
                justify-content: center;
            }
            
            :root {
                --grid-size: 4;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 1.8rem;
            }
            
            .status-item {
                min-width: 90px;
                padding: 5px 10px;
            }
            
            .status-value {
                font-size: 1.5rem;
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .rules-list {
                grid-template-columns: 1fr;
            }
            
            .game-grid {
                gap: 8px;
            }
            
            .grid-item {
                font-size: 0.8rem;
                padding: 5px;
            }
            
            :root {
                --grid-size: 4;
            }
        }

        .background-icons {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.05;
        }

        .icon {
            position: absolute;
            font-size: 2rem;
        }
    </style>
</head>
<body>
    <div class="start-screen" id="startScreen">
        <div class="start-content">
            <h2>互联网产品消消乐</h2>
            <p class="start-description">连接科技世界的产品、创始人、公司与投资者</p>
            <button class="btn btn-success start-game-btn" id="startBtn">
                <i class="fas fa-play"></i>开始游戏
            </button>
        </div>
    </div>
    
    <div class="background-icons" id="backgroundIcons"></div>
    
    <div class="container" id="gameContainer" style="display: none;">
        <div class="title-area">
            <h1 class="title">互联网产品<span>消消乐</span></h1>
            <p class="subtitle">连接科技世界的产品、创始人、公司与投资者 - 匹配相关联的元素获得高分</p>
        </div>
        
        <div class="game-container">
            <div class="game-ui">
                <div class="game-header" style="display: none;">
                    <div class="status-item score">
                        <div class="status-label">分数</div>
                        <div class="status-value"><i class="fas fa-star"></i> <span id="score">0</span></div>
                    </div>
                    <div class="status-item level">
                        <div class="status-label">关卡</div>
                        <div class="status-value"><i class="fas fa-flag"></i> <span id="level">1</span></div>
                    </div>
                    <div class="status-item timer">
                        <div class="status-label">时间</div>
                        <div class="status-value"><i class="fas fa-clock"></i> <span id="timer">60</span></div>
                    </div>
                    <div class="status-item hints">
                        <div class="status-label">提示</div>
                        <div class="status-value"><i class="fas fa-lightbulb"></i> <span id="hints">3</span></div>
                    </div>
                    <div class="status-item combo">
                        <div class="status-label">连击</div>
                        <div class="status-value"><i class="fas fa-bolt"></i> <span id="combo">0</span>x</div>
                    </div>
                </div>
                
                <div class="game-area">
                    <div class="game-grid" id="gameGrid"></div>
                    </div>
                </div>
                
                <div class="controls" id="gameControls" style="display: none;">
                    <button class="btn btn-warning" id="hintBtn" disabled>
                        <i class="fas fa-lightbulb"></i>提示
                    </button>
                    <button class="btn btn-primary" id="shuffleBtn" disabled>
                        <i class="fas fa-random"></i>洗牌
                    </button>
                    <button class="btn btn-secondary" id="restartBtn" disabled>
                        <i class="fas fa-redo"></i>重玩
                    </button>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h3><i class="fas fa-info-circle"></i> 游戏规则</h3>
            <div class="rules-list">
                <div class="rule">
                    <strong>核心玩法</strong>
                    <p>找出两个相关的互联网元素进行匹配（如：公司-产品、创始人-公司等）</p>
                </div>
                <div class="rule">
                    <strong>得分规则</strong>
                    <p>每次成功匹配可获得10分，连续匹配有额外加分</p>
                </div>
                <div class="rule">
                    <strong>特殊组合</strong>
                    <p>匹配到"创始人-产品"组合可获得15分额外奖励</p>
                </div>
                <div class="rule">
                    <strong>难度提升</strong>
                    <p>随着关卡增加，网格变大，元素更多样</p>
                </div>
                <div class="rule">
                    <strong>时间限制</strong>
                    <p>每关时间60秒，匹配一对可获得额外时间</p>
                </div>
                <div class="rule">
                    <strong>提示系统</strong>
                    <p>使用提示可高亮一对可匹配元素，每关可用3次</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="result-modal" id="resultModal">
        <div class="modal-content">
            <h2 class="modal-title" id="modalTitle">恭喜过关!</h2>
            <div class="final-stats">
                <div class="stat-item">
                    <div>最终得分</div>
                    <div id="finalScore" class="stat-value">0</div>
                </div>
                <div class="stat-item">
                    <div>关卡</div>
                    <div id="finalLevel" class="stat-value">1</div>
                </div>
                <div class="stat-item">
                    <div>匹配数量</div>
                    <div id="matchesMade" class="stat-value">0</div>
                </div>
                <div class="stat-item">
                    <div>最高连击</div>
                    <div id="maxCombo" class="stat-value">0</div>
                </div>
                <div class="stat-item">
                    <div>世界排名</div>
                    <div id="worldRank" class="stat-value">#{Math.floor(Math.random() * 100) + 1}</div>
                </div>
                <div class="stat-item">
                    <div>职级称号</div>
                    <div id="jobTitle" class="stat-value">P#{Math.floor(Math.random() * 8) + 4}</div>
                </div>
                <div class="stat-item">
                    <div>预估年薪</div>
                    <div id="estimatedSalary" class="stat-value">#{Math.floor(Math.random() * 100) + 50}万</div>
                </div>
            </div>
            <div class="actions">
                <button class="btn btn-primary" id="nextLevelBtn">下一关</button>
                <button class="btn btn-secondary" id="menuBtn">返回主菜单</button>
            </div>
        </div>
    </div>

    <script>
        // 丰富的互联网游戏数据
        const gameData = {
            groups: [
                // 中国互联网
                {
                    name: "腾讯系",
                    items: [
                        { name: "腾讯", type: "company" },
                        { name: "微信", type: "app" },
                        { name: "QQ", type: "app" },
                        { name: "王者荣耀", type: "game" },
                        { name: "和平精英", type: "game" },
                        { name: "马化腾", type: "founder" },
                        { name: "张小龙", type: "founder" },
                        { name: "刘炽平", type: "founder" }
                    ]
                },
                {
                    name: "阿里巴巴系",
                    items: [
                        { name: "阿里巴巴", type: "company" },
                        { name: "淘宝", type: "app" },
                        { name: "天猫", type: "app" },
                        { name: "支付宝", type: "app" },
                        { name: "菜鸟网络", type: "company" },
                        { name: "马云", type: "founder" },
                        { name: "张勇", type: "founder" }
                    ]
                },
                {
                    name: "字节跳动系",
                    items: [
                        { name: "字节跳动", type: "company" },
                        { name: "抖音", type: "app" },
                        { name: "TikTok", type: "app" },
                        { name: "今日头条", type: "app" },
                        { name: "西瓜视频", type: "app" },
                        { name: "张一鸣", type: "founder" }
                    ]
                },
                {
                    name: "百度系",
                    items: [
                        { name: "百度", type: "company" },
                        { name: "百度搜索", type: "app" },
                        { name: "百度地图", type: "app" },
                        { name: "文心一言", type: "app" },
                        { name: "李彦宏", type: "founder" },
                        { name: "马东敏", type: "founder" }
                    ]
                },
                {
                    name: "美团系",
                    items: [
                        { name: "美团", type: "company" },
                        { name: "美团外卖", type: "app" },
                        { name: "大众点评", type: "app" },
                        { name: "美团单车", type: "app" },
                        { name: "王兴", type: "founder" }
                    ]
                },
                {
                    name: "京东系",
                    items: [
                        { name: "京东", type: "company" },
                        { name: "京东商城", type: "app" },
                        { name: "京东物流", type: "company" },
                        { name: "刘强东", type: "founder" },
                        { name: "徐雷", type: "founder" }
                    ]
                },
                {
                    name: "拼多多系",
                    items: [
                        { name: "拼多多", type: "company" },
                        { name: "拼多多App", type: "app" },
                        { name: "黄峥", type: "founder" }
                    ]
                },
                
                // 国际互联网
                {
                    name: "Meta系",
                    items: [
                        { name: "Meta", type: "company" },
                        { name: "Facebook", type: "app" },
                        { name: "Instagram", type: "app" },
                        { name: "WhatsApp", type: "app" },
                        { name: "马克·扎克伯格", type: "founder" },
                        { name: "雪莉·桑德伯格", type: "founder" }
                    ]
                },
                {
                    name: "Google系",
                    items: [
                        { name: "Google", type: "company" },
                        { name: "谷歌搜索", type: "app" },
                        { name: "YouTube", type: "app" },
                        { name: "Gmail", type: "app" },
                        { name: "拉里·佩奇", type: "founder" },
                        { name: "谢尔盖·布林", type: "founder" },
                        { name: "桑达尔·皮查伊", type: "founder" }
                    ]
                },
                {
                    name: "Apple系",
                    items: [
                        { name: "苹果", type: "company" },
                        { name: "iPhone", type: "app" },
                        { name: "iOS", type: "app" },
                        { name: "Mac OS", type: "app" },
                        { name: "App Store", type: "app" },
                        { name: "史蒂夫·乔布斯", type: "founder" },
                        { name: "蒂姆·库克", type: "founder" }
                    ]
                },
                {
                    name: "Microsoft系",
                    items: [
                        { name: "微软", type: "company" },
                        { name: "Windows", type: "app" },
                        { name: "Office", type: "app" },
                        { name: "Azure", type: "app" },
                        { name: "比尔·盖茨", type: "founder" },
                        { name: "萨提亚·纳德拉", type: "founder" }
                    ]
                },
                {
                    name: "Amazon系",
                    items: [
                        { name: "亚马逊", type: "company" },
                        { name: "AWS", type: "app" },
                        { name: "Kindle", type: "app" },
                        { name: "杰夫·贝索斯", type: "founder" },
                        { name: "安迪·贾西", type: "founder" }
                    ]
                },
                {
                    name: "Netflix系",
                    items: [
                        { name: "Netflix", type: "company" },
                        { name: "Netflix App", type: "app" },
                        { name: "里德·哈斯廷斯", type: "founder" }
                    ]
                },
                {
                    name: "Tesla系",
                    items: [
                        { name: "特斯拉", type: "company" },
                        { name: "Tesla App", type: "app" },
                        { name: "埃隆·马斯克", type: "founder" }
                    ]
                },
                {
                    name: "OpenAI系",
                    items: [
                        { name: "OpenAI", type: "company" },
                        { name: "ChatGPT", type: "app" },
                        { name: "DALL·E", type: "app" },
                        { name: "山姆·奥特曼", type: "founder" }
                    ]
                },
                {
                    name: "小米系",
                    items: [
                        { name: "小米", type: "company" },
                        { name: "MIUI", type: "app" },
                        { name: "小爱同学", type: "app" },
                        { name: "雷军", type: "founder" }
                    ]
                },
                {
                    name: "华为系",
                    items: [
                        { name: "华为", type: "company" },
                        { name: "鸿蒙", type: "app" },
                        { name: "华为云", type: "app" },
                        { name: "任正非", type: "founder" }
                    ]
                },
                
                // 其他
                {
                    name: "投资机构",
                    items: [
                        { name: "红杉资本", type: "investor" },
                        { name: "IDG资本", type: "investor" },
                        { name: "软银愿景", type: "investor" },
                        { name: "高瓴资本", type: "investor" },
                        { name: "腾讯投资", type: "investor" },
                        { name: "阿里资本", type: "investor" },
                        { name: "沈南鹏", type: "founder" },
                        { name: "孙正义", type: "founder" },
                        { name: "张磊", type: "founder" }
                    ]
                },
                {
                    name: "游戏公司",
                    items: [
                        { name: "米哈游", type: "company" },
                        { name: "原神", type: "game" },
                        { name: "网易", type: "company" },
                        { name: "梦幻西游", type: "game" },
                        { name: "暴雪", type: "company" },
                        { name: "魔兽世界", type: "game" },
                        { name: "任天堂", type: "company" },
                        { name: "马里奥", type: "game" }
                    ]
                },
                {
                    name: "新兴科技",
                    items: [
                        { name: "OpenAI", type: "company" },
                        { name: "ChatGPT", type: "app" },
                        { name: "Sam Altman", type: "founder" },
                        { name: "NVIDIA", type: "company" },
                        { name: "Jensen Huang", type: "founder" },
                        { name: "SpaceX", type: "company" },
                        { name: "Starlink", type: "app" },
                        { name: "Tesla", type: "company" },
                        { name: "Elon Musk", type: "founder" },
                        { name: "Google", type: "company" },
                        { name: "YouTube", type: "app" },
                        { name: "Larry Page", type: "founder" },
                        { name: "Meta", type: "company" },
                        { name: "Facebook", type: "app" },
                        { name: "Mark Zuckerberg", type: "founder" },
                        { name: "Twitter", type: "app" },
                        { name: "Jack Dorsey", type: "founder" },
                        { name: "Amazon", type: "company" },
                        { name: "AWS", type: "app" },
                        { name: "Jeff Bezos", type: "founder" },
                        { name: "Microsoft", type: "company" },
                        { name: "Windows", type: "app" },
                        { name: "Bill Gates", type: "founder" },
                        { name: "Apple", type: "company" },
                        { name: "iPhone", type: "app" },
                        { name: "Steve Jobs", type: "founder" },
                        { name: "Netflix", type: "app" },
                        { name: "Reed Hastings", type: "founder" },
                        { name: "Uber", type: "app" },
                        { name: "Travis Kalanick", type: "founder" },
                        { name: "Airbnb", type: "app" },
                        { name: "Brian Chesky", type: "founder" },
                        { name: "TikTok", type: "app" },
                        { name: "Zhang Yiming", type: "founder" },
                        { name: "ByteDance", type: "company" },
                        { name: "Alibaba", type: "company" },
                        { name: "Taobao", type: "app" },
                        { name: "Jack Ma", type: "founder" },
                        { name: "Tencent", type: "company" },
                        { name: "WeChat", type: "app" },
                        { name: "Pony Ma", type: "founder" },
                        { name: "Baidu", type: "company" },
                        { name: "Robin Li", type: "founder" },
                        { name: "JD.com", type: "company" },
                        { name: "Richard Liu", type: "founder" },
                        { name: "Xiaomi", type: "company" },
                        { name: "Lei Jun", type: "founder" },
                        { name: "Huawei", type: "company" },
                        { name: "Ren Zhengfei", type: "founder" },
                        { name: "Zoom", type: "app" },
                        { name: "Eric Yuan", type: "founder" }
                    ]
                }
            ]
        };

        // 游戏状态
        const gameState = {
            currentLevel: 0,
            score: 0,
            timer: 0,
            hints: 0,
            gridItems: [],
            selectedItem: null,
            isProcessing: false,
            gameActive: false,
            comboCount: 0,
            maxCombo: 0,
            matchesMade: 0,
            timerInterval: null
        };

        // DOM元素
        const elements = {
            gameGrid: document.getElementById('gameGrid'),
            score: document.getElementById('score'),
            level: document.getElementById('level'),
            timer: document.getElementById('timer'),
            hints: document.getElementById('hints'),
            combo: document.getElementById('combo'),
            hintBtn: document.getElementById('hintBtn'),
            shuffleBtn: document.getElementById('shuffleBtn'),
            restartBtn: document.getElementById('restartBtn'),
            themeToggle: document.getElementById('themeToggle'),
            resultModal: document.getElementById('resultModal'),
            modalTitle: document.getElementById('modalTitle'),
            finalScore: document.getElementById('finalScore'),
            finalLevel: document.getElementById('finalLevel'),
            matchesMade: document.getElementById('matchesMade'),
            maxCombo: document.getElementById('maxCombo'),
            worldRank: document.getElementById('worldRank'),
            jobTitle: document.getElementById('jobTitle'),
            estimatedSalary: document.getElementById('estimatedSalary'),
            nextLevelBtn: document.getElementById('nextLevelBtn'),
            menuBtn: document.getElementById('menuBtn'),
            backgroundIcons: document.getElementById('backgroundIcons')
        };

        // 初始化游戏
        function initGame() {
            resetGameState();
            createBackgroundIcons();
            generateGameGrid();
            startTimer();
            renderGameUI();
            gameState.gameActive = true;
            
            // 更新游戏状态显示
            gameState.currentLevel = 1;
            gameState.timer = 60;
            gameState.hints = 3;
            renderGameUI();
        }
        
        // 开始游戏按钮事件
        document.getElementById('startBtn').addEventListener('click', function() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'block';
            document.querySelector('.game-header').style.display = 'flex';
            document.querySelector('.game-grid').style.display = 'grid';
            document.getElementById('gameControls').style.display = 'flex';
            document.getElementById('hintBtn').disabled = false;
            document.getElementById('shuffleBtn').disabled = false;
            document.getElementById('restartBtn').disabled = false;
            initGame();
        });

        // 创建背景图标
        function createBackgroundIcons() {
            const types = ['fas fa-mobile-alt', 'fas fa-laptop', 'fas fa-globe', 'fas fa-gamepad', 
                          'fas fa-server', 'fas fa-cloud', 'fas fa-database', 'fas fa-wifi'];
            elements.backgroundIcons.innerHTML = '';
            
            for (let i = 0; i < 30; i++) {
                const icon = document.createElement('i');
                icon.className = types[Math.floor(Math.random() * types.length)];
                icon.style.top = `${Math.random() * 100}%`;
                icon.style.left = `${Math.random() * 100}%`;
                icon.style.fontSize = `${Math.random() * 2 + 1}rem`;
                icon.style.opacity = Math.random() * 0.1 + 0.05;
                elements.backgroundIcons.appendChild(icon);
            }
        }

        // 重置游戏状态
        function resetGameState() {
            gameState.currentLevel = 1;
            gameState.score = 0;
            gameState.timer = 60;
            gameState.hints = 3;
            gameState.gridItems = [];
            gameState.selectedItem = null;
            gameState.isProcessing = false;
            gameState.gameActive = true;
            gameState.comboCount = 0;
            gameState.maxCombo = 0;
            gameState.matchesMade = 0;
            clearInterval(gameState.timerInterval);
            elements.resultModal.classList.remove('show');
            document.documentElement.style.setProperty('--grid-size', Math.min(5 + Math.floor(gameState.currentLevel/3), 7));
        }

        // 生成游戏网格
        function generateGameGrid() {
            elements.gameGrid.innerHTML = '';
            
            // 确定使用的群组
            const groupsToUse = selectGroupsForLevel();
            
            // 创建需要填充的元素数组
            let itemsToAdd = [];
            groupsToUse.forEach(group => {
                // 随机选择2-4个元素从每个组
                const shuffled = [...group.items].sort(() => 0.5 - Math.random());
                itemsToAdd.push(...shuffled.slice(0, 2 + Math.floor(Math.random() * 3)));
            });
            
            // 确保总数为偶数（可配对）
            if (itemsToAdd.length % 2 !== 0) {
                itemsToAdd.pop();
            }
            
            // 复制元素以组成配对
            itemsToAdd = itemsToAdd.concat([...itemsToAdd]);
            
            // 计算网格尺寸
            const gridSize = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--grid-size'));
            const totalCells = gridSize * gridSize;
            
            // 确保元素数量匹配网格尺寸
            while (itemsToAdd.length > totalCells) {
                itemsToAdd.pop();
            }
            while (itemsToAdd.length < totalCells) {
                itemsToAdd.push(null); // 填充空位
            }
            
            // 按矩形对称排列
            const gridItems = [];
            
            // 先随机打乱元素顺序
            itemsToAdd.sort(() => Math.random() - 0.5);
            
            // 确保元素数量与网格单元格总数匹配
            while (itemsToAdd.length < totalCells) {
                itemsToAdd.push(null); // 填充空位
            }
            
            // 按行列顺序填充元素
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    const index = i * gridSize + j;
                    if (itemsToAdd[index]) {
                        gridItems.push({
                            id: index,
                            name: itemsToAdd[index].name,
                            type: itemsToAdd[index].type,
                            group: itemsToAdd[index].group
                        });
                    } else {
                        gridItems.push(null); // 空位
                    }
                }
            }
            
            // 存储状态
            gameState.gridItems = gridItems;
            
            // 渲染DOM元素
            renderGridItems();
        }

        // 根据关卡选择群组
        function selectGroupsForLevel() {
            if (gameState.currentLevel <= 2) {
                return gameData.groups.slice(0, 4); // 前4个组
            } else if (gameState.currentLevel <= 5) {
                return gameData.groups.slice(0, 8); // 前8个组
            } else if (gameState.currentLevel <= 8) {
                return gameData.groups.slice(0, 12); // 前12个组
            }
            return [...gameData.groups]; // 所有群组
        }

        // 渲染网格项
        function renderGridItems() {
            elements.gameGrid.innerHTML = '';
            gameState.gridItems.forEach((item, index) => {
                if (!item) return;
                
                const itemElement = document.createElement('div');
                itemElement.className = `grid-item ${item.type}-item`;
                const typeMap = {
    'company': '公司',
    'app': '应用',
    'game': '游戏',
    'founder': '创始人',
    'investor': '投资者'
};
itemElement.innerHTML = `${item.name}<span class="type-badge">${typeMap[item.type] || item.type}</span>`;
                itemElement.dataset.index = index;
                
                // 添加点击事件
                itemElement.addEventListener('click', (event) => onItemClick(event, itemElement, index));
                
                elements.gameGrid.appendChild(itemElement);
            });
        }



        // 点击元素处理
        function onItemClick(event, element, index) {
            event.stopPropagation();
            event.preventDefault();

            // 严格的状态检查
            if (!gameState.gameActive || 
                gameState.isProcessing || 
                !gameState.gridItems[index] || 
                element.classList.contains('correct')) {
                return;
            }

            // 确保所有元素的状态一致性
            if (gameState.selectedItem === null) {
                // 清除所有可能存在的选中状态
                document.querySelectorAll('.grid-item.selected').forEach(item => {
                    item.classList.remove('selected');
                });
            }
            
            // 如果是第一次选择
            if (gameState.selectedItem === null) {
                gameState.selectedItem = index;
                element.classList.add('selected');
                return;
            }

            // 如果再次点击已选中的元素，则取消选择
            if (gameState.selectedItem === index) {
                gameState.selectedItem = null;
                element.classList.remove('selected');
                return;
            }
            
            // 处理匹配
            gameState.isProcessing = true;
            elements.gameGrid.style.pointerEvents = 'none';
            const firstIndex = gameState.selectedItem;
            gameState.selectedItem = null;
            const firstElement = elements.gameGrid.querySelector(`[data-index="${firstIndex}"]`);
            const secondElement = element;
            
            const areMatched = checkMatch(firstIndex, index);
            
            if (areMatched) {
                // 匹配成功处理
                firstElement.classList.remove('selected');
                firstElement.classList.add('correct');
                secondElement.classList.add('correct');


                
                gameState.comboCount++;
                gameState.matchesMade++;
                
                // 分数计算
                const item1 = gameState.gridItems[firstIndex];
                const item2 = gameState.gridItems[index];
                const sameType = item1.type === item2.type;
                let points = sameType ? 10 : 25; // 同类型10分，不同类型25分
                
                // 如果不是第一次消除，才加连击分数
                if (gameState.comboCount > 1) {
                    points += (gameState.comboCount - 1) * 2; // 连击加分
                }
                
                gameState.score += points;
                
                // 更新时间（每匹配一对增加5秒）
                gameState.timer = Math.min(gameState.timer + 5, 60 + (gameState.currentLevel - 1) * 15);
                
                // 显示连击动画
                showComboAnimation(secondElement, points);
                
                // 添加淡出动画
                if (firstElement) {
                    firstElement.style.transition = 'opacity 0.3s ease-out';
                    firstElement.style.opacity = '0';
                }
                if (secondElement) {
                    secondElement.style.transition = 'opacity 0.3s ease-out';
                    secondElement.style.opacity = '0';
                }
                
                setTimeout(() => {
                    // 隐藏匹配成功的元素
                    if (firstElement) firstElement.style.display = 'none';
                    if (secondElement) secondElement.style.display = 'none';

                    gameState.gridItems[firstIndex] = null;
                    gameState.gridItems[index] = null;

                    // 检查是否完成关卡
                    checkLevelCompletion();
                    gameState.isProcessing = false;
                    elements.gameGrid.style.pointerEvents = 'auto';
                }, 300);
            } else {
                // 匹配失败处理
                secondElement.classList.add('selected');
                gameState.comboCount = 0;
                
                setTimeout(() => {
                    firstElement.classList.remove('selected');
                    secondElement.classList.remove('selected');
                    gameState.isProcessing = false;
                    elements.gameGrid.style.pointerEvents = 'auto';
                }, 800);
            }
            
            // 更新最高连击
            if (gameState.comboCount > gameState.maxCombo) {
                gameState.maxCombo = gameState.comboCount;
            }
            
            // 更新UI
            renderGameUI();
        }

        // 检查是否是创始人-产品特殊组合
        function isFounderProductCombo(item1, item2) {
            const types = [item1.type, item2.type];
            return types.includes('founder') && (types.includes('app') || types.includes('game') || types.includes('company'));
        }

        // 显示连击动画
        function showComboAnimation(element, points) {
            const combo = document.createElement('div');
            combo.className = 'combo-animation';
            combo.textContent = `+${points}`;
            combo.style.left = `${element.offsetLeft + element.offsetWidth/2}px`;
            combo.style.top = `${element.offsetTop + element.offsetHeight/2}px`;
            document.body.appendChild(combo);
            
            setTimeout(() => {
                document.body.removeChild(combo);
            }, 1000);
        }

        // 检查匹配
        function checkMatch(index1, index2) {
            const item1 = gameState.gridItems[index1];
            const item2 = gameState.gridItems[index2];
            
            if (!item1 || !item2) return false;
            
            // 检查它们是否属于同一群组
            const group1 = findItemGroup(item1);
            const group2 = findItemGroup(item2);
            
            return group1 === group2;
        }

        // 查找元素所属群组
        function findItemGroup(item) {
            for (const group of gameData.groups) {
                if (group.items.some(i => i.name === item.name)) {
                    return group.name;
                }
            }
            return null;
        }

        // 检查是否完成当前关卡
        function checkLevelCompletion() {
            const remainingItems = gameState.gridItems.filter(item => item !== null);
            
            if (remainingItems.length <= 2) {
                setTimeout(() => {
                    gameState.gameActive = false;
                    clearInterval(gameState.timerInterval);
                    showLevelComplete();
                }, 500);
            }
        }

        // 显示关卡完成
function showLevelComplete() {
    elements.finalScore.textContent = gameState.score;
    elements.finalLevel.textContent = gameState.currentLevel;
    elements.matchesMade.textContent = gameState.matchesMade;
    elements.maxCombo.textContent = `${gameState.maxCombo}x`;
    
    // 生成随机世界排名(1-9999999)
    elements.worldRank.textContent = Math.floor(Math.random() * 9999999) + 1;
    elements.worldRank.style.fontWeight = 'bold';
    elements.worldRank.style.color = '#ff5722';
    
    // 生成随机阿里巴巴职级(P4-P11)
    elements.jobTitle.textContent = 'P' + (Math.floor(Math.random() * 8) + 4);
    elements.jobTitle.style.fontWeight = 'bold';
    elements.jobTitle.style.color = '#2196f3';
    
    // 生成随机预估年薪(50-150万)
    elements.estimatedSalary.textContent = (Math.floor(Math.random() * 100) + 50) + '万';
    elements.estimatedSalary.style.fontWeight = 'bold';
    elements.estimatedSalary.style.color = '#4caf50';
    
    if (gameState.currentLevel >= 10) {
        elements.modalTitle.textContent = "恭喜完成所有关卡!";
        elements.nextLevelBtn.disabled = true;
    } else {
        elements.modalTitle.textContent = "恭喜过关!";
        elements.nextLevelBtn.disabled = false;
    }
    
    elements.resultModal.classList.add('show');
}

        // 开始计时器
        function startTimer() {
            clearInterval(gameState.timerInterval);
            
            gameState.timerInterval = setInterval(() => {
                if (!gameState.gameActive) return;
                
                gameState.timer--;
                elements.timer.textContent = gameState.timer;
                
                if (gameState.timer <= 0) {
                    clearInterval(gameState.timerInterval);
                    gameState.gameActive = false;
                    showGameOver();
                }
            }, 1000);
        }

        // 游戏结束
        function showGameOver() {
            elements.modalTitle.textContent = "时间到!";
            elements.finalScore.textContent = gameState.score;
            elements.finalLevel.textContent = gameState.currentLevel;
            elements.matchesMade.textContent = gameState.matchesMade;
            elements.maxCombo.textContent = `${gameState.maxCombo}x`;
            elements.nextLevelBtn.textContent = "重新开始";
            
            elements.resultModal.classList.add('show');
        }

        // 更新UI显示
        function renderGameUI() {
            elements.score.textContent = gameState.score;
            elements.level.textContent = gameState.currentLevel;
            elements.timer.textContent = gameState.timer;
            elements.hints.textContent = gameState.hints;
            elements.combo.textContent = gameState.comboCount;
            
            // 更新提示按钮状态
            elements.hintBtn.disabled = gameState.hints <= 0;
        }

        // 使用提示
        function useHint() {
            if (gameState.hints <= 0 || !gameState.gameActive || gameState.isProcessing) return;
            
            gameState.hints--;
            renderGameUI();
            
            // 查找第一对可匹配的元素
            for (let i = 0; i < gameState.gridItems.length; i++) {
                if (!gameState.gridItems[i]) continue;
                
                for (let j = i + 1; j < gameState.gridItems.length; j++) {
                    if (!gameState.gridItems[j]) continue;
                    
                    if (checkMatch(i, j)) {
                        // 高亮这对元素
                        const item1 = elements.gameGrid.children[i];
                        const item2 = elements.gameGrid.children[j];
                        
                        item1.classList.add('selected');
                        item2.classList.add('selected');
                        
                        setTimeout(() => {
                            item1.classList.remove('selected');
                            item2.classList.remove('selected');
                        }, 1500);
                        
                        return;
                    }
                }
            }
        }

        // 洗牌功能
        function shuffleGrid() {
            if (gameState.isProcessing || !gameState.gameActive) return;
            
            // 过滤出仍然存在的元素
            const remainingItems = gameState.gridItems.filter(item => item !== null);
            
            // 随机排序
            remainingItems.sort(() => Math.random() - 0.5);
            
            // 更新状态数组
            let newIndex = 0;
            gameState.gridItems = gameState.gridItems.map(item => 
                item ? remainingItems[newIndex++] : null
            );
            
            // 重新渲染
            renderGridItems();
            gameState.comboCount = 0;
            renderGameUI();
        }

        // 事件监听器设置
        function setupEventListeners() {
            elements.hintBtn.addEventListener('click', useHint);
            elements.shuffleBtn.addEventListener('click', shuffleGrid);
            elements.restartBtn.addEventListener('click', initGame);

            elements.nextLevelBtn.addEventListener('click', goToNextLevel);
            elements.menuBtn.addEventListener('click', initGame);
        }



        // 进入下一关
        function goToNextLevel() {
            elements.resultModal.classList.remove('show');
            gameState.currentLevel++;
            
            // 更新网格大小
            const newSize = Math.min(5 + Math.floor(gameState.currentLevel/3), 7);
            document.documentElement.style.setProperty('--grid-size', newSize);
            
            gameState.hints = 3;
            gameState.timer = 60 + (gameState.currentLevel - 1) * 15;
            gameState.comboCount = 0;
            gameState.maxCombo = 0;
            gameState.matchesMade = 0;
            gameState.gameActive = true;
            
            generateGameGrid();
            startTimer();
            renderGameUI();
        }

        // 启动游戏
        function startGame() {
            setupEventListeners();
            initGame();
        }

        // 页面加载完成后启动游戏
        document.addEventListener('DOMContentLoaded', startGame);
    </script>
</body>
</html>